{% extends "layout.html" %}

{% block title %}
    Student {{ student.name }}
{% endblock title %}


{% block content %}
    <script>
		$(document).ready(function(){
  		 	$(".active").removeClass("active");
  		 	$("#student").addClass("active");
		});
	</script>


    <style>
        @media only screen and (max-width: 700px) {
            .book-list {
                margin-top:260px;
            }
            .student-card {
                margin:10px;
            }
        }
    </style>




    <div class="container" style="padding-top:100px;">
        <div class="row">
            <div class="card student-card col-md-4 col-lg-4 col-sm-12 col-xs-12" style="height:180px;">
              <div class="card-body">
                <label style="margin-bottom:-20px;" class="text-muted">Meno</label>
                <h3 class="card-title" >{{student.name}}</h3>
                <div>
                    <strong>Trieda:</strong>
                    <label>{{ student.grade.name }}</label>
                </div>
                <div style="margin-top:-8px;">
                    <strong>Kód: </strong>
                    <label>{{ student.code }}</label>
                </div>
              </div>
              <div style="margin-top:30px;" class="d-flex justify-content-center">
	            	<div class="collapse " id="new-book">
	            	  <div class="card card-body ">
                        <strong class="" style="padding-bottom:5px;font-size: 18px;">Rent Book:</strong>
	            	    <form class="form-inline needs-validation" action="{{url_for('student_bp.rent_book',student_id=student.id)}}" method="post" style="margin-top:10px;">
	            		  <input name="code"  type="number" class="form-control mb-2 mr-sm-2" id="validationCustom01" placeholder="Code">
                          <button type="submit" class="btn btn-primary mb-2">Rent</button>
	            		</form>
	            	  </div>
	            	</div>
	           </div>
               <div style="margin-top:20px;" class="d-flex justify-content-center">
                    <button id="add-book" class="btn btn-primary" type="button" data-toggle="collapse" data-target="#new-book" aria-expanded="false" aria-controls="new-book">
	                   + Rent Book
	                </button>
                    <a href="{{ url_for('student_bp.return_all',student_id=student.id) }}" style="margin-left:10px;" class="btn btn-danger" type="button" >
	                  Return all Books
	                </a>
               </div>
            </div>
            <div class="book-list col-md-8 col-lg-8 col-sm-12 col-xs-12">
                <h4 class="text-muted">Požičané učebnice</h4>
                <div>
                    {% for book in student.books %}
                        <div style="margin-top:10px;" class="card">
                          <div class="card-body">

                            <div class="container">
                                <div class="row">
                                    <img class="inline img-grade" height="30" src="{{url_for('static',filename='images/book_icon.png')}}">
                                    <div style="margin-left:10px;" class="col-8">
                                        <h5>{{ book.book_type.name }}</h5>
                                    </div>

                                    <div style="margin-left:50px;" class="col-8">
                                        <strong>Autor:</strong>
                                        <label>Jozej Kukuricúdus</label>
                                    </div>
                                    <div>
                                        <a class="btn btn-danger float-right btn-sm" href="{{ url_for('student_bp.return_book',student_id=student.id,book_id=book.id) }}">Return</a>
                                    </div>
                                    <div class="col-8" style="margin-left:50px;margin-top:-10px;margin-bottom:-20px;">
                                        <strong>Kód:</strong>
                                        <label>{{ book.code }}</label>
                                    </div>
                                </div>
                            </div>


                          </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="ar_u_s" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Are you sure ?</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            After deleting user is, no chance to take it back.
          </div>
          <div class="modal-footer">
            <a href="{{ url_for('student_bp.delete_student',student_id=student.id) }}" type="button" class="btn btn-danger">Delete</a>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>



    <div class="d-flex justify-content-center" style="margin-top:130px;">
        <button type="button" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#ar_u_s">Delete Student</button>
    </div>



    <script>

        $(document).ready(function(){
          $("#live-search-box").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#books-table tr:not(.header)").filter(function() {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
          });
        });

        function hideFunction() {
          var x = document.getElementById("original-grade");
          var y = document.getElementById("grade-form");
          if (x.style.display === "none") {
            x.style.display = "block";
            y.style.display = "none";
          } else {
            x.style.display = "none";
            y.style.display = "block";
          }
        }

        $(document).ready(function(){
	     $('#add-book').on('click', function () {
	      var text=$('#add-book').text();
	      if(text === "- Add Book"){
	        $(this).html('+ Add Book');
	      } else{
	        $(this).text('- Add Book');
	     }
	    });
	    });
    </script>


{% endblock content %}